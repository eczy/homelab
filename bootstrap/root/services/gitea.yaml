apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: gitea
  namespace: argocd
  finalizers:
  - resources-finalizer.argocd.argoproj.io
spec:
  project: default
  source:
    chart: gitea
    repoURL: https://dl.gitea.io/charts/
    targetRevision: 6.0.3
    helm:
      releaseName: gitea
      parameters:
      - name: "postgresql.livenessProbe.initialDelaySeconds"
        value: "300"
      - name: "ingress.enabled"
        value: "true"
      - name: "ingress.hosts[0].host"
        value: "gitea.home.lan"
      - name: "ingress.hosts[0].paths[0].path"
        value: "/"
      - name: "ingress.hosts[0].paths[0].pathType"
        value: "Prefix"
      - name: "ingress.annotations"
        value: 
      - name: "ingress.annotations"
        value: 
          traefik.ingress.kubernetes.io/router.entrypoints: websecure
          traefik.ingress.kubernetes.io/router.tls: true

  destination:
    server: https://kubernetes.default.svc
    namespace: gitea